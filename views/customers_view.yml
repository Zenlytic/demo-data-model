version: 1
type: view
name: customers
model_name: pure_organics
sql_table_name: DEMO_PROD.CUSTOMERS
row_label: Customer
default_date: first_order
description: This view provides a comprehensive overview of customer data for Pure Organics, including details such as the customer's ID, email address, name, address, and location. The `accepts_marketing` field indicates whether the customer has opted in to marketing communications, while the `first_order` field provides the date and time of the customer's first order. Additionally, the `first_marketing_group`, `first_promotion`, and `first_campaign` fields provide information about the customer's initial marketing interactions with the company. Use this view to gain insights into customer behavior, track customer acquisition and retention, and optimize your marketing campaigns to drive revenue and growth.

identifiers:
- name: customer_id
  type: primary
  sql: ${customer_id}

fields:
- name: customer_id
  field_type: dimension
  type: string
  sql: ${TABLE}.CUSTOMER_ID
  primary_key: yes
  hidden: yes

- name: accepts_marketing
  field_type: dimension
  type: yesno
  sql: ${TABLE}.ACCEPTS_MARKETING

- name: email
  field_type: dimension
  type: string
  sql: ${TABLE}.EMAIL
  description: The customer's email address
  required_access_grants: [pii_access]

- name: first_name
  field_type: dimension
  type: string
  sql: ${TABLE}.FIRST_NAME

- name: last_name
  field_type: dimension
  type: string
  sql: ${TABLE}.LAST_NAME

- name: address
  field_type: dimension
  type: string
  sql: ${TABLE}.ADDRESS
  description: The customer's address (shipping)

- name: city
  field_type: dimension
  type: string
  sql: ${TABLE}.CITY
  description: The customer's city (location)
  drill_up: state
  drill_down: zipcode

- name: state
  field_type: dimension
  type: string
  sql: ${TABLE}.STATE
  description: The customer's state (location)
  searchable: yes
  drill_down: city

- name: zipcode
  field_type: dimension
  type: string
  sql: ${TABLE}.ZIPCODE
  description: The customer's zip code
  drill_up: city

- name: first_marketing_group
  field_type: dimension
  type: string
  description: The first marketing group the user came in through 
  sql: ${TABLE}.first_channel

- name: first_promotion
  field_type: dimension
  type: string
  description: The first promotion the user came in through 
  sql: ${TABLE}.first_promotion

- name: first_campaign
  field_type: dimension
  type: string
  description: The first campaign the user came in through 
  sql: ${TABLE}.first_campaign

- name: first_order
  field_type: dimension_group
  type: time
  datatype: timestamp
  timeframes:
  - raw
  - date
  - week
  - month
  - quarter
  - year
  sql: ${TABLE}.first_order_at
  description: The time at which the customer's first order was placed.
